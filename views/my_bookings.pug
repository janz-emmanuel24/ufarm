doctype html
head
    meta(charset='UTF-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    link(rel='stylesheet' href='bootstrap-5.0.2-dist/bootstrapCss/bootstrap.css')
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT' crossorigin='anonymous')
    link(rel='stylesheet' href='css/style.css')
    title My Orders
body
    nav.navbar.navbar-expand-lg.navbar-light
        .container-fluid
            a.navbar-brand(href='#') Navbar
            button.navbar-toggler(type='button' data-bs-toggle='collapse' data-bs-target='#navbarNavAltMarkup' aria-controls='navbarNavAltMarkup' aria-expanded='false' aria-label='Toggle navigation')
                span.navbar-toggler-icon
            #navbarNavAltMarkup.collapse.navbar-collapse
                .navbar-nav 
                    a.nav-link.active(href="/" aria-current="page") Home
                    form.justify-content-end(action="/logout" method='post')
                        button.btn.btn-primary.d-flex.justify-content-end(type="submit") Logout
    .user-information.my-5 
        | This will contain the user information
    hr
    .orders-main.my-5
        .dashboard-tabs.urban-farmer-dashboard
            ul#myTab.nav.nav-tabs(role='tablist')
                li.nav-item(role='presentation')
                    button#home-tab.nav-link.active(data-bs-toggle='tab' data-bs-target='#home' type='button' role='tab' aria-controls='home' aria-selected='true') Pending Orders
                li.nav-item(role='presentation')
                    button#profile-tab.nav-link(data-bs-toggle='tab' data-bs-target='#profile' type='button' role='tab' aria-controls='profile' aria-selected='false') Approved Orders
                //- li.nav-item(role='presentation')
                //-     button#contact-tab.nav-link(data-bs-toggle='tab' data-bs-target='#contact' type='button' role='tab' aria-controls='contact' aria-selected='false') Declined
            #myTabContent.tab-content
                //- Orders Pending Approval
                #home.tab-pane.fade.show.active(role='tabpanel' aria-labelledby='home-tab')
                    .container.mt-5
                        .row
                            if myOrders.length 
                                each myOrder in myOrders
                                    if myOrder._id.order_status === 'booked & pending' 
                                        .col-md-4.mb-4
                                            p(style='text-align: left')
                                                strong Order Status 
                                                i(style='color: #4CBB17; font-weight: bolder') #{myOrder._id.order_status} 
                                            p(style='text-align: left')
                                                strong Produce Ordered 
                                                i #{myOrder._id.produce_ordered}
                                            p(style='text-align: left')
                                                strong Produce Quantity 
                                                i #{myOrder._id.order_quantity}
                                            p(style='text-align: left')
                                                strong Price Per Quantity 
                                                i #{myOrder._id.unit_price}
                                            p(style='text-align: left')
                                                // To be got after aggregations
                                                strong Produce Total 
                                                i #{myOrder.productTotal}
                                            // Button trigger modal
                                            button.add2cart-btn.btn(type='button' data-bs-toggle='modal' data-bs-target=`#exampleModal-${myOrder._id._id}`)
                                                | Contact Seller
                                        // Modal
                                        .modal.fade(tabindex='-1' id=`exampleModal-${myOrder._id._id}` aria-labelledby=`exampleModal-${myOrder._id._id}Label` aria-hidden='true')
                                            .modal-dialog.modal-dialog-centered
                                                .modal-content
                                                    .modal-header
                                                        h5#exampleModalLabel.modal-title Product: #{myOrder._id.produce_ordered}
                                                        button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
                                                    .modal-body
                                                        .row.mt-2.mb-2 
                                                            .col-12 
                                                                h4 Seller Name: #{myOrder._id.produce_owner_name}
                                                                .row 
                                                                    .col-4 
                                                                    .col-4 
                                                                        hr
                                                                    .col-4
                                                        .row 
                                                            .col-12 
                                                                h5 Dail Contact: #{myOrder._id.produce_owner_contact}
                                                            .col-12.mt-3 
                                                                h6.text-center 
                                                                    a(href=`mailto:${myOrder._id.produce_owner_email}` style='text-decoration: none') Email #{myOrder._id.produce_owner_name}
                            else 
                                p No Orders were made
                // Delivered
                #profile.tab-pane.fade(role='tabpanel' aria-labelledby='profile-tab')
                    .container.mt-5
                        .row
                            if myOrders.length 
                                each myOrder in myOrders
                                    if myOrder._id.order_status === 'Approved for Delivery' 
                                        .col-md-4.mb-4
                                            p(style='text-align: left')
                                                strong Order Status 
                                                i(style='color: #4CBB17; font-weight: bolder') #{myOrder._id.order_status} 
                                            p(style='text-align: left')
                                                strong Produce Ordered 
                                                i #{myOrder._id.produce_ordered}
                                            p(style='text-align: left')
                                                strong Produce Quantity 
                                                i #{myOrder._id.order_quantity}
                                            p(style='text-align: left')
                                                strong Price Per Quantity 
                                                i #{myOrder._id.unit_price}
                                            p(style='text-align: left')
                                                // To be got after aggregations
                                                strong Produce Total 
                                                i #{myOrder.productTotal}
                                            // Button trigger modal
                                            button.add2cart-btn.btn(type='button' data-bs-toggle='modal' data-bs-target=`#exampleModal-${myOrder._id._id}`)
                                                | Contact Seller
                                        // Modal
                                        .modal.fade(tabindex='-1' id=`exampleModal-${myOrder._id._id}` aria-labelledby=`exampleModal-${myOrder._id._id}Label` aria-hidden='true')
                                            .modal-dialog.modal-dialog-centered
                                                .modal-content
                                                    .modal-header
                                                        h5#exampleModalLabel.modal-title Product: #{myOrder._id.produce_ordered}
                                                        button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
                                                    .modal-body
                                                        .row.mt-2.mb-2 
                                                            .col-12 
                                                                h4 Seller Name: #{myOrder._id.produce_owner_name}
                                                                .row 
                                                                    .col-4 
                                                                    .col-4 
                                                                        hr
                                                                    .col-4
                                                        .row 
                                                            .col-12 
                                                                h5 Dail Contact: #{myOrder._id.produce_owner_contact}
                                                            .col-12.mt-3 
                                                                h6.text-center 
                                                                    a(href=`mailto:${myOrder._id.produce_owner_email}` style='text-decoration: none') Email #{myOrder._id.produce_owner_name}
                            else 
                                p No Orders were made                    
                // Declined
                //- #contact.tab-pane.fade(role='tabpanel' aria-labelledby='contact-tab')
                //-     .container.mt-5
                //-        p Declined Orders 
#footer(style='margin-top: 20%')
    .container
        .row
            .col-md-4.p-3.mt-5
                h5 Urban Farmer:
                p From your farm to our stores and from our stores to your hand.
                h5 Our Clients:
                p From our stores to your household.
                i We strive to make your meals delicious
            .col-sm-4.col-md-4.p-3.mt-5
                h5 Pages:
                ul
                    li
                        a(href='#') Home
                    li
                        a(href='#') Shop
                    li
                        a(href='#') Our Farmers
                    li
                        a(href='#') About us
                    li
                        a(href='#') Testimonials
            .col-sm-4.col-md-4.p-3.mt-5
                h5 Information:
                h6 Main Office:
                ul
                    li Wandegeya Market
                    li South Wing - shop 2001A
                h6 Tel: 0789482852
                h5 Opening Hours
                ul
                    li Monday - Friday: 8am - 8pm
                    li Saturday - Sunday: 10am - 2pm
                h5 Socials
                .socials
                    ul
                        li
                            a(href='#') Facebook
                        li
                            a(href='#') whatsApp
                        li
                            a(href='#') Twitter
    .careof
        p.text-center &copy; 2022 Ufarm. All rights reserved
script(src='../../srcs/bootstrap-5.0.2-dist/js/bootstrap.min.js')
script(src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js' integrity='sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3' crossorigin='anonymous')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js' integrity='sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz' crossorigin='anonymous')
